From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: GaryOderNichts <12049776+GaryOderNichts@users.noreply.github.com>
Date: Sun, 5 Mar 2023 23:53:10 +0100
Subject: [PATCH] 5067: HCS12: Add missing carry clear in TSTA

---
 Ghidra/Processors/HCS12/data/languages/HCS_HC12.sinc | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/Ghidra/Processors/HCS12/data/languages/HCS_HC12.sinc b/Ghidra/Processors/HCS12/data/languages/HCS_HC12.sinc
index bb65f884a..2bfea9899 100644
--- a/Ghidra/Processors/HCS12/data/languages/HCS_HC12.sinc
+++ b/Ghidra/Processors/HCS12/data/languages/HCS_HC12.sinc
@@ -5853,13 +5853,14 @@ define pcodeop LoadStack;
 	$(Z) = (A == 0);
 	$(N) = (A s< 0);
 	V_equals_0();	
+	$(C) = 0;
 }
 
 :TSTB                    is Prefix18=0 & op8=0xD7 
 {
 	$(Z) = (B == 0);
 	$(N) = (B s< 0);
-	$(V) = 0;
+	V_equals_0();
 	$(C) = 0;
 }
 
-- 
2.39.1

