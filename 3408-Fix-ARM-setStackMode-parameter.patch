diff --git a/Ghidra/Processors/ARM/data/languages/ARMTHUMBinstructions.sinc b/Ghidra/Processors/ARM/data/languages/ARMTHUMBinstructions.sinc
index e68be097dc2..812ea9c33de 100644
--- a/Ghidra/Processors/ARM/data/languages/ARMTHUMBinstructions.sinc
+++ b/Ghidra/Processors/ARM/data/languages/ARMTHUMBinstructions.sinc
@@ -2837,7 +2837,7 @@ define pcodeop setStackMode;
 # TODO: not sure about the following semantics  
   b = isThreadMode();
   if (!b) goto inst_next;
-  stackMode:1 = isUsingMainStack() == 1:1;
+  stackMode:1 = (Rn0003 & 2) != 0;
   setStackMode(stackMode);
 # TODO: should we set sp ?
 }
