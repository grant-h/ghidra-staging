diff --git a/Ghidra/Features/Base/src/main/java/ghidra/program/util/ELFExternalSymbolResolver.java b/Ghidra/Features/Base/src/main/java/ghidra/program/util/ELFExternalSymbolResolver.java
index c9563d1a384..8e8ee68dab2 100644
--- a/Ghidra/Features/Base/src/main/java/ghidra/program/util/ELFExternalSymbolResolver.java
+++ b/Ghidra/Features/Base/src/main/java/ghidra/program/util/ELFExternalSymbolResolver.java
@@ -148,7 +148,12 @@ private static void resolveSymbolsToLibrary(Program program,
 				continue;
 			}
 			try {
-				s.setNamespace(extLibrary);
+				Symbol parent_symbol = s.getParentSymbol();
+				if (parent_symbol != null && parent_symbol.isExternal()) {
+					parent_symbol.setNamespace(extLibrary);
+				} else {
+					s.setNamespace(extLibrary);
+				}
 				idIterator.remove();
 				libResolvedCount++;
 				Msg.debug(ELFExternalSymbolResolver.class, "External symbol " + extLoc.getLabel() +
@@ -180,13 +185,9 @@ private static boolean isLocationContainedInLibrary(Program libProgram,
 
 	private static Collection<Long> getUnresolvedExternalFunctionIds(Program program) {
 		List<Long> symbolIds = new ArrayList<>();
-		ExternalManager externalManager = program.getExternalManager();
-		Library library = externalManager.getExternalLibrary(Library.UNKNOWN);
-		if (library != null) {
-			for (Symbol s : program.getSymbolTable().getSymbols(library)) {
-				if (s.getSymbolType() == SymbolType.FUNCTION) {
-					symbolIds.add(s.getID());
-				}
+		for (Symbol s : program.getSymbolTable().getExternalSymbols()) {
+			if (s.getSymbolType() == SymbolType.FUNCTION) {
+				symbolIds.add(s.getID());
 			}
 		}
 		return symbolIds;
